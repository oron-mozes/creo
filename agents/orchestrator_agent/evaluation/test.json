[
  {
    "name": "new_user_no_business_card",
    "description": "New user with no business card should be routed to onboarding_agent",
    "user_message": "I have a local coffee shop",
    "session_context": {
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_call_campaign_brief": true,
      "should_NOT_ask_questions_directly": true,
      "should_NOT_search_google": true
    }
  },
  {
    "name": "onboarding_stage_active",
    "description": "When stage is 'onboarding', should stay with onboarding_agent",
    "user_message": "Alma cafe",
    "session_context": {
      "workflow_state": {
        "stage": "onboarding"
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_switch_to_campaign_brief": true,
      "should_NOT_search_google": true,
      "should_NOT_assume_location": true
    }
  },
  {
    "name": "onboarding_with_url",
    "description": "User provides URL during onboarding, should delegate to onboarding_agent",
    "user_message": "this is us https://www.almacafe.co.il/ourplaces/rehovot",
    "session_context": {
      "workflow_state": {
        "stage": "onboarding"
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_extract_info_itself": true,
      "should_delegate_url_to_onboarding": true
    }
  },
  {
    "name": "business_card_exists_find_influencers",
    "description": "Business card exists, user wants influencers - should route to campaign_brief_agent",
    "user_message": "I want to find influencers for my cafe",
    "session_context": {
      "workflow_state": {
        "stage": null
      },
      "business_card": {
        "name": "Alma Cafe",
        "website": "https://www.almacafe.co.il",
        "location": "Brooklyn, NY",
        "service_type": "Coffee shop"
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_call_onboarding_agent": true,
      "should_use_existing_business_card": true
    }
  },
  {
    "name": "campaign_brief_stage_active",
    "description": "When stage is 'campaign_brief', should stay with campaign_brief_agent",
    "user_message": "I want to reach young professionals who love specialty coffee",
    "session_context": {
      "workflow_state": {
        "stage": "campaign_brief"
      },
      "business_card": {
        "name": "Alma Cafe",
        "location": "Brooklyn, NY",
        "service_type": "Coffee shop"
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_switch_to_creator_finder": true,
      "should_stay_in_current_stage": true
    }
  },
  {
    "name": "vague_question_no_business_card",
    "description": "Vague marketing question with no business card - should start onboarding first",
    "user_message": "Can you help me with marketing?",
    "session_context": {
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_answer_directly": true,
      "should_collect_business_info_first": true
    }
  },
  {
    "name": "business_card_exists_wants_campaign",
    "description": "User with business card wants to create a campaign - should route to campaign_brief_agent",
    "user_message": "I want to create a marketing campaign to promote my new menu",
    "session_context": {
      "workflow_state": {
        "stage": null
      },
      "business_card": {
        "name": "TechStart",
        "location": "San Francisco, CA",
        "service_type": "Tech startup"
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_call_onboarding_agent": true
    }
  },
  {
    "name": "business_card_exists_wants_outreach",
    "description": "User with business card wants help writing outreach message - should route to outreach_message_agent",
    "user_message": "Can you help me write a message to reach out to @fitness_guru_sarah?",
    "session_context": {
      "workflow_state": {
        "stage": null
      },
      "business_card": {
        "name": "FitLife Gym",
        "location": "Austin, TX",
        "service_type": "Fitness center"
      }
    },
    "expected_behavior": {
      "should_call_outreach_message_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_call_onboarding_agent": true
    }
  },
  {
    "name": "creator_finder_stage_active",
    "description": "When stage is 'creator_finder', should stay with creator_finder_agent",
    "user_message": "I want creators with at least 100K followers",
    "session_context": {
      "workflow_state": {
        "stage": "creator_finder"
      },
      "business_card": {
        "name": "GreenEats",
        "location": "Portland, OR",
        "service_type": "Vegan restaurant"
      }
    },
    "expected_behavior": {
      "should_call_creator_finder_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_switch_to_different_stage": true,
      "should_stay_in_current_stage": true
    }
  },
  {
    "name": "outreach_message_stage_active",
    "description": "When stage is 'outreach_message', should stay with outreach_message_agent",
    "user_message": "Make it more personal and mention our sustainable practices",
    "session_context": {
      "workflow_state": {
        "stage": "outreach_message"
      },
      "business_card": {
        "name": "EcoWear",
        "location": "Seattle, WA",
        "service_type": "Sustainable clothing"
      }
    },
    "expected_behavior": {
      "should_call_outreach_message_agent": true,
      "should_call_frontdesk_agent": true,
      "should_stay_in_current_stage": true
    }
  },
  {
    "name": "campaign_builder_stage_active",
    "description": "When stage is 'campaign_builder', should stay with campaign_builder_agent",
    "user_message": "Add more Instagram posts to the campaign",
    "session_context": {
      "workflow_state": {
        "stage": "campaign_builder"
      },
      "business_card": {
        "name": "StyleHub",
        "location": "Miami, FL",
        "service_type": "Fashion boutique"
      }
    },
    "expected_behavior": {
      "should_call_campaign_builder_agent": true,
      "should_call_frontdesk_agent": true,
      "should_stay_in_current_stage": true
    }
  },
  {
    "name": "multiple_business_info_pieces_no_business_card",
    "description": "User provides multiple pieces of business info upfront - should route to onboarding_agent",
    "user_message": "I run a yoga studio called ZenFlow in Boulder, Colorado",
    "session_context": {
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_ask_for_already_provided_info": true
    }
  },
  {
    "name": "general_question_with_business_card",
    "description": "User asks general question but has business card - should provide helpful response without switching stages",
    "user_message": "What's the best way to reach millennials?",
    "session_context": {
      "workflow_state": {
        "stage": null
      },
      "business_card": {
        "name": "ModernEats",
        "location": "Chicago, IL",
        "service_type": "Restaurant"
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent": true,
      "should_call_frontdesk_agent": true,
      "should_provide_helpful_response": true
    }
  },
  {
    "name": "follow_up_question_during_onboarding",
    "description": "User asks clarifying question during onboarding - should stay with onboarding_agent",
    "user_message": "What do you mean by service type?",
    "session_context": {
      "workflow_state": {
        "stage": "onboarding"
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent": true,
      "should_call_frontdesk_agent": true,
      "should_help_user_understand": true,
      "should_NOT_switch_stages": true
    }
  },
  {
    "name": "specific_creator_request_with_business_card",
    "description": "User asks to find specific type of creators with existing business card",
    "user_message": "Find me food bloggers in Los Angeles with 50K+ followers",
    "session_context": {
      "workflow_state": {
        "stage": null
      },
      "business_card": {
        "name": "TacoTime",
        "location": "Los Angeles, CA",
        "service_type": "Mexican restaurant"
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent": true,
      "should_call_frontdesk_agent": true,
      "should_NOT_call_onboarding_agent": true
    }
  },
  {
    "name": "new_user_initial_greeting",
    "description": "Tests a brand new user with no business card or stage, expecting routing to onboarding_agent.",
    "user_message": "Hi, I'd like to start a new campaign.",
    "session_context": {
      "business_card": null,
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_not_handle_request_directly": true,
      "should_not_switch_stage": true
    },
    "expected_response_contains": []
  },
  {
    "name": "new_user_providing_url",
    "description": "Tests a new user providing a business URL, but without a business card yet, expecting routing to onboarding_agent.",
    "user_message": "Our website is https://example.com/brand",
    "session_context": {
      "business_card": null,
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_not_extract_info_from_url": true
    },
    "expected_response_contains": []
  },
  {
    "name": "onboarding_stage_follow_up",
    "description": "Tests a user already in the onboarding stage, asking a follow-up question, expecting to stay in onboarding_agent.",
    "user_message": "What kind of business details do you need?",
    "session_context": {
      "business_card": null,
      "workflow_state": {
        "stage": "onboarding"
      }
    },
    "expected_behavior": {
      "should_call_onboarding_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_stay_in_onboarding_stage": true
    },
    "expected_response_contains": []
  },
  {
    "name": "business_card_exists_request_influencers",
    "description": "Tests a user with an existing business card and no active stage, requesting influencers, expecting routing to campaign_brief_agent.",
    "user_message": "I need to find some tech influencers.",
    "session_context": {
      "business_card": {
        "name": "Tech Innovations Inc."
      },
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_not_call_creator_finder_directly": true
    },
    "expected_response_contains": []
  },
  {
    "name": "business_card_exists_request_marketing_campaign",
    "description": "Tests a user with an existing business card and no active stage, requesting a marketing campaign, expecting routing to campaign_brief_agent.",
    "user_message": "Help me set up a new marketing campaign for our product launch.",
    "session_context": {
      "business_card": {
        "name": "Product Launch Co."
      },
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent_first": true,
      "should_call_frontdesk_agent_second": true
    },
    "expected_response_contains": []
  },
  {
    "name": "business_card_exists_request_outreach_message",
    "description": "Tests a user with an existing business card and no active stage, requesting help with an outreach message, expecting routing to outreach_message_agent.",
    "user_message": "Draft an email to a potential creator.",
    "session_context": {
      "business_card": {
        "name": "Creative Agency"
      },
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_outreach_message_agent_first": true,
      "should_call_frontdesk_agent_second": true
    },
    "expected_response_contains": []
  },
  {
    "name": "creator_finder_stage_active_follow_up",
    "description": "Tests a user already in the creator_finder stage, asking for more options, expecting to stay in creator_finder_agent.",
    "user_message": "Can you find creators with a younger audience?",
    "session_context": {
      "business_card": {
        "name": "Youth Brand"
      },
      "workflow_state": {
        "stage": "creator_finder"
      }
    },
    "expected_behavior": {
      "should_call_creator_finder_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_stay_in_creator_finder_stage": true
    },
    "expected_response_contains": []
  },
  {
    "name": "campaign_brief_stage_active_clarification",
    "description": "Tests a user in the campaign_brief stage, asking for clarification, expecting to stay in campaign_brief_agent.",
    "user_message": "What do you mean by target demographic?",
    "session_context": {
      "business_card": {
        "name": "Market Research Co."
      },
      "workflow_state": {
        "stage": "campaign_brief"
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_stay_in_campaign_brief_stage": true
    },
    "expected_response_contains": []
  },
  {
    "name": "business_card_exists_general_question_no_stage",
    "description": "Tests a user with an existing business card and no active stage, asking a general question not directly matching specific intent keywords, expecting default routing to campaign_brief_agent.",
    "user_message": "What are the next steps after planning?",
    "session_context": {
      "business_card": {
        "name": "Consulting Firm"
      },
      "workflow_state": {
        "stage": null
      }
    },
    "expected_behavior": {
      "should_call_campaign_brief_agent_first": true,
      "should_call_frontdesk_agent_second": true
    },
    "expected_response_contains": []
  },
  {
    "name": "outreach_message_stage_active_refinement",
    "description": "Tests a user in the outreach_message stage, asking for a refinement, expecting to stay in outreach_message_agent.",
    "user_message": "Can you make the tone more professional?",
    "session_context": {
      "business_card": {
        "name": "PR Experts"
      },
      "workflow_state": {
        "stage": "outreach_message"
      }
    },
    "expected_behavior": {
      "should_call_outreach_message_agent_first": true,
      "should_call_frontdesk_agent_second": true,
      "should_stay_in_outreach_message_stage": true
    },
    "expected_response_contains": []
  }
]