[
  {
    "name": "user_provides_website_url",
    "description": "User provides a website URL, agent should search and extract business info",
    "user_message": "Yes, here is my website: https://www.almacafe.co.il/ourplaces/rehovot",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_extract_business_info": true,
      "should_generate_confirmation_block": true,
      "should_ask_for_confirmation": true
    },
    "expected_business_card": {
      "name": "Alma Cafe",
      "website": "https://www.almacafe.co.il/ourplaces/rehovot",
      "location": "Rehovot, Israel",
      "service_type": "Coffee shop",
      "social_links": "Not provided"
    }
  },
  {
    "name": "user_provides_business_name_and_location",
    "description": "User provides business name and location, agent should search for details",
    "user_message": "My business is called TechStart and we're located in San Francisco",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_extract_business_info": true,
      "should_generate_confirmation_block": true,
      "should_ask_for_confirmation": true
    }
  },
  {
    "name": "business_card_already_exists",
    "description": "Business card already exists in session, should skip onboarding",
    "user_message": "I want to find influencers for my brand",
    "session_context": {
      "business_card": {
        "name": "Alma Cafe",
        "website": "https://www.almacafe.co.il",
        "location": "Rehovot, Israel",
        "service_type": "Coffee shop",
        "social_links": "Not provided"
      }
    },
    "expected_behavior": {
      "should_use_google_search": false,
      "should_extract_business_info": false,
      "should_generate_confirmation_block": false,
      "should_acknowledge_existing_business": true,
      "should_confirm_onboarding_complete": true
    },
    "expected_response_contains": [
      "Alma Cafe",
      "already have your details",
      "Let's move forward"
    ]
  },
  {
    "name": "user_confirms_business_details",
    "description": "User confirms the business details presented",
    "user_message": "Yes, that's correct!",
    "session_context": {
      "business_card": null,
      "last_agent_message": "Business Name: Alma Cafe\\nLocation: Rehovot, Israel\\nService Type: Coffee shop\\n\\nDoes everything look correct?"
    },
    "expected_behavior": {
      "should_generate_confirmation_block": true,
      "should_thank_user": true
    }
  },
  {
    "name": "new_user_with_minimal_info",
    "description": "New user provides minimal information, agent should ask for more",
    "user_message": "I have a local coffee shop",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_ask_for_business_name": true,
      "should_ask_for_location": true,
      "should_not_generate_confirmation_block": true
    }
  },
  {
    "name": "user_provides_social_media_handle",
    "description": "User provides Instagram handle, agent should search for business info",
    "user_message": "My Instagram is @almacafe_rehovot",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_extract_business_info": true
    }
  },
  {
    "name": "vague_generic_question_no_context",
    "description": "User asks vague question with no business context clues",
    "user_message": "Can you help me with marketing?",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_ask_for_business_name": true,
      "should_ask_for_industry_or_service_type": true,
      "should_not_generate_confirmation_block": true,
      "should_be_conversational_and_welcoming": true
    },
    "expected_response_contains": [
      "business",
      "brand"
    ]
  },
  {
    "name": "user_provides_comprehensive_info_upfront",
    "description": "User volunteers multiple pieces of info in one sentence",
    "user_message": "I run a sustainable fashion brand in LA called EcoWear",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_extract_name": true,
      "should_extract_location": true,
      "should_extract_service_type": true,
      "should_use_google_search": true,
      "should_generate_confirmation_block": true
    },
    "expected_business_card_contains": {
      "name": "EcoWear",
      "location": "LA",
      "service_type": "sustainable fashion"
    }
  },
  {
    "name": "user_asks_clarifying_question",
    "description": "User confused about what agent is asking, seeks clarification",
    "user_message": "What do you mean by location?",
    "session_context": {
      "business_card": null,
      "last_agent_message": "What's your brand name and where is your business located?"
    },
    "expected_behavior": {
      "should_provide_clarification": true,
      "should_give_location_examples": true,
      "should_not_generate_confirmation_block": true,
      "should_remain_patient_and_helpful": true
    },
    "expected_response_contains": [
      "city",
      "example"
    ]
  },
  {
    "name": "user_provides_business_name_only",
    "description": "User provides only business name, no location or other context",
    "user_message": "My business is called StyleHub",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_ask_for_location_if_search_fails": true,
      "should_not_generate_confirmation_block_yet": true
    }
  },
  {
    "name": "user_provides_tiktok_handle",
    "description": "User provides TikTok handle, agent should search for business info",
    "user_message": "Check out our TikTok @ecowear_official",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_extract_business_info": true,
      "should_mention_searching_tiktok": true
    }
  },
  {
    "name": "user_corrects_information_during_confirmation",
    "description": "User corrects details when asked for confirmation",
    "user_message": "No, the location is wrong - we're actually in San Jose, not San Francisco",
    "session_context": {
      "business_card": null,
      "last_agent_message": "Business Name: TechStart\\nLocation: San Francisco, CA\\nService Type: Tech startup\\n\\nDoes everything look correct?"
    },
    "expected_behavior": {
      "should_acknowledge_correction": true,
      "should_update_location": true,
      "should_present_updated_info_for_confirmation": true,
      "should_not_generate_confirmation_block_yet": true
    },
    "expected_response_contains": [
      "San Jose"
    ]
  },
  {
    "name": "user_provides_linkedin_profile",
    "description": "User provides LinkedIn company profile URL",
    "user_message": "Here's our LinkedIn: linkedin.com/company/techstart-inc",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_extract_business_info": true,
      "should_include_linkedin_in_social_links": true
    }
  },
  {
    "name": "user_provides_partial_url",
    "description": "User provides domain without https protocol",
    "user_message": "Our site is almacafe.co.il",
    "session_context": {
      "business_card": null
    },
    "expected_behavior": {
      "should_use_google_search": true,
      "should_construct_full_url": true,
      "should_extract_business_info": true
    }
  },
  {
    "name": "user_gives_address_instead_of_location",
    "description": "User provides full street address instead of city",
    "user_message": "We're at 123 Main Street, Suite 400, New York, NY 10001",
    "session_context": {
      "business_card": null,
      "last_agent_message": "What's your brand name and where is your business located?"
    },
    "expected_behavior": {
      "should_extract_city_and_state": true,
      "should_simplify_location_format": true,
      "should_not_include_full_street_address": true
    },
    "expected_business_card_contains": {
      "location": "New York, NY"
    }
  },
  {
    "name": "new_user_provides_name_and_incomplete_location",
    "description": "Tests the scenario where a new user provides a business name and incomplete location information, requiring clarification.",
    "user_message": "My business is called GreenThumb and we're in Brooklyn.",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": ""
    },
    "expected_behavior": {
      "should_search": true,
      "should_ask_for_more_specific_location": true,
      "should_not_generate_business_card": true
    },
    "expected_response_contains": [
      "GreenThumb",
      "Brooklyn",
      "find more information",
      "Let me search for"
    ],
    "expected_business_card": {}
  },
  {
    "name": "returning_user_with_complete_business_card",
    "description": "Tests the scenario where a returning user with a complete business card initiates a request.",
    "user_message": "I need to find fashion influencers.",
    "session_context": {
      "business_card": {
        "name": "EcoChic",
        "website": "https://www.ecochic.com",
        "social_links": "https://instagram.com/ecochic,https://facebook.com/ecochic",
        "location": "Los Angeles, CA",
        "service_type": "Sustainable Fashion"
      },
      "workflow_state": {},
      "last_agent_message": ""
    },
    "expected_behavior": {
      "should_acknowledge_business_card": true,
      "should_not_ask_for_business_info": true,
      "should_not_search": true,
      "should_not_generate_business_card": true
    },
    "expected_response_contains": [
      "Welcome back",
      "EcoChic",
      "Let's move forward"
    ],
    "expected_business_card": {}
  },
  {
    "name": "new_user_provides_tiktok_handle",
    "description": "Tests the scenario where a new user provides a TikTok handle for their business.",
    "user_message": "Check out our TikTok @sweetTreatsBakery",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": ""
    },
    "expected_behavior": {
      "should_search": true,
      "should_extract_info_from_search": true,
      "should_generate_business_card": true
    },
    "expected_response_contains": [
      "search for your business",
      "Sweet Treats Bakery",
      "tiktok.com/@sweetTreatsBakery"
    ],
    "expected_business_card": {
      "name": "Sweet Treats Bakery",
      "website": "Not provided",
      "social_links": "https://tiktok.com/@sweetTreatsBakery",
      "location": "SomeCity, State",
      "service_type": "Bakery"
    }
  },
  {
    "name": "user_provides_linkedin_and_confirms",
    "description": "Tests the scenario where a user provides a LinkedIn profile and then confirms the extracted information.",
    "user_message": "Yes, that's correct!",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": "Great! Let me search for your business using your LinkedIn profile...\n\nPerfect! I found your company details. Let me confirm:\n\nBusiness Name: Tech Solutions Inc\nLocation: New York, NY\nService Type: IT Services\nWebsite: https://www.techsolutions.com\nSocial Links: https://linkedin.com/company/techsolutions\n\nDoes everything look correct?"
    },
    "expected_behavior": {
      "should_generate_business_card": true,
      "should_not_search": true
    },
    "expected_response_contains": [
      "Perfect! Thanks for confirming",
      "Tech Solutions Inc",
      "Let's get started"
    ],
    "expected_business_card": {
      "name": "Tech Solutions Inc",
      "website": "https://www.techsolutions.com",
      "social_links": "https://linkedin.com/company/techsolutions",
      "location": "New York, NY",
      "service_type": "IT Services"
    }
  },
  {
    "name": "new_user_corrects_location_and_confirms",
    "description": "Tests the scenario where a new user corrects the location information and then confirms the corrected details.",
    "user_message": "No, we are actually located in Austin, TX.",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": "Great! Let me search for Urban Eats in Dallas to find more details...\n\nPerfect! I found your business. Let me confirm these details:\n\nBusiness Name: Urban Eats\nLocation: Dallas, TX\nService Type: Restaurant\nWebsite: https://www.urbaneats.com\nSocial Links: Not provided\n\nDoes everything look correct?"
    },
    "expected_behavior": {
      "should_update_location": true,
      "should_ask_for_reconfirmation": true,
      "should_not_generate_business_card_yet": true
    },
    "expected_response_contains": [
      "Thanks for catching that",
      "Austin, TX",
      "Does this look correct now?"
    ],
    "expected_business_card": {}
  },
  {
    "name": "new_user_provides_website_with_typo",
    "description": "Tests the scenario where a new user provides a website URL with a typo.",
    "user_message": "Our website is https://www.examplebiz.cm",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": ""
    },
    "expected_behavior": {
      "should_search": true,
      "should_handle_potential_search_failure": true,
      "should_ask_for_details_if_search_fails": true,
      "should_not_generate_business_card": true
    },
    "expected_response_contains": [
      "Let me look up your website",
      "unable to find",
      "What is your business name?",
      "What type of business"
    ],
    "expected_business_card": {}
  },
  {
    "name": "new_user_provides_name_and_service",
    "description": "Tests the scenario where a new user provides a business name and service type.",
    "user_message": "I run a bakery called Sweet Delights.",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": ""
    },
    "expected_behavior": {
      "should_search": true,
      "should_ask_for_location": true,
      "should_not_generate_business_card": true
    },
    "expected_response_contains": [
      "Sweet Delights",
      "bakery",
      "Let me search for",
      "Where are you located?"
    ],
    "expected_business_card": {}
  },
  {
    "name": "user_asks_for_clarification_on_service_type",
    "description": "Tests the scenario where a user asks for clarification on what is meant by 'service type'.",
    "user_message": "What do you mean by service type?",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": "To make sure I find the best match for you, could you tell me a bit about your business? What's your brand name and what industry are you in?"
    },
    "expected_behavior": {
      "should_provide_explanation": true,
      "should_not_search": true,
      "should_not_generate_business_card": true
    },
    "expected_response_contains": [
      "By service type",
      "industry",
      "type of business",
      "services you offer"
    ],
    "expected_business_card": {}
  },
  {
    "name": "user_provides_full_street_address",
    "description": "Tests the scenario where a user provides a full street address as their location.",
    "user_message": "We're at 456 Oak Avenue, Suite 200, Anytown, CA 91234",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": ""
    },
    "expected_behavior": {
      "should_extract_city_state": true,
      "should_search": true,
      "should_generate_business_card": true
    },
    "expected_response_contains": [
      "Anytown, CA",
      "search for",
      "456 Oak Avenue"
    ],
    "expected_business_card": {
      "name": "Some Business",
      "website": "Not provided",
      "social_links": "Not provided",
      "location": "Anytown, CA",
      "service_type": "Some Service"
    }
  },
  {
    "name": "new_user_provides_partial_website_and_confirms",
    "description": "Tests the scenario where a new user provides a partial website URL (without https://) and confirms the extracted information.",
    "user_message": "yes",
    "session_context": {
      "business_card": null,
      "workflow_state": {},
      "last_agent_message": "Perfect! Let me look up your website...\n\nGreat! I found your cafe. Let me confirm these details:\n\nBusiness Name: Alma Cafe\nLocation: Rehovot, Israel\nService Type: Coffee shop\nWebsite: https://www.almacafe.co.il\nSocial Links: Not provided\n\nDoes everything look correct?"
    },
    "expected_behavior": {
      "should_generate_business_card": true,
      "should_not_search": true
    },
    "expected_response_contains": [
      "Perfect! Thanks for confirming",
      "Alma Cafe",
      "Let's get started"
    ],
    "expected_business_card": {
      "name": "Alma Cafe",
      "website": "https://www.almacafe.co.il",
      "social_links": "Not provided",
      "location": "Rehovot, Israel",
      "service_type": "Coffee shop"
    }
  }
]